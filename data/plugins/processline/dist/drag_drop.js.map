{"version":3,"sources":["../src/drag_drop.js"],"names":["angular","module","directive","$document","restrict","scope","dragOptions","chart","link","elem","attr","startX","startY","x","y","start","stop","drag","container","width","offsetWidth","height","offsetHeight","id","document","getElementById","getBoundingClientRect","on","e","preventDefault","clientX","offsetLeft","clientY","offsetTop","mousemove","mouseup","setPosition","unbind","left","right","top","bottom","css"],"mappings":"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","file":"drag_drop.js","sourcesContent":["angular.module('grafana.directives')\n\n.directive('ngDraggable', function($document) {\n  return {\n    restrict: 'A',\n    //templateUrl:'public/plugins/grafana-processline-panel/node.html',\n    scope: {\n      dragOptions: '=ngDraggable',\n      chart:'=chart'\n    },\n    link: function(scope, elem, attr) {\n\n\n      var  startX,startY,x=scope.chart.x,y=scope.chart.y,\n          start, stop, drag, container;\n\n      var width  = elem[0].offsetWidth,\n          height = elem[0].offsetHeight;\n\n      // Obtain drag options\n      if (scope.dragOptions) {\n        start  = scope.dragOptions.start;\n        drag   = scope.dragOptions.drag;\n        stop   = scope.dragOptions.stop;\n        var id = scope.dragOptions.container;\n        if (id) {\n            container = document.getElementById(id).getBoundingClientRect();\n        }\n      }\n\n      // Bind mousedown event\n      elem.on('mousedown', function(e) {\n        e.preventDefault();\n        startX = e.clientX - elem[0].offsetLeft;\n        startY = e.clientY - elem[0].offsetTop;\n        $document.on('mousemove', mousemove);\n        $document.on('mouseup', mouseup);\n        if (start) start(e);\n      });\n\n      // Handle drag event\n      function mousemove(e) {\n        y = e.clientY - startY;\n        x = e.clientX - startX;\n\n        setPosition();\n        if (drag) drag(e);\n         scope.chart.x=x;\n         scope.chart.y=y;\n      }\n\n      // Unbind drag events\n      function mouseup(e) {\n        $document.unbind('mousemove', mousemove);\n        $document.unbind('mouseup', mouseup);\n        scope.chart.x=x;\n         scope.chart.y=y;\n        if (stop) stop(e);\n      }\n\n      // Move element, within container if provided\n      function setPosition() {\n        if (container) {\n          if (x < container.left) {\n            x = container.left;\n            scope.chart.x=x;\n          } else if (x > container.right - width) {\n            x = container.right - width;\n            scope.chart.x=x;\n          }\n          if (y < container.top) {\n            y = container.top;\n            scope.chart.y=y;\n          } else if (y > container.bottom - height) {\n            y = container.bottom - height;\n            scope.chart.y=y;\n          }\n\n\n        }\n\n\n\n\n        elem.css({\n\n          top: y + 'px',\n          left: x + 'px'\n        });\n\n      }\n    }\n  }\n\n})\n\n"]}